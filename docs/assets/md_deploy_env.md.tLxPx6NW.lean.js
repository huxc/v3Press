import{_ as s,c as a,o as i,a4 as n}from"./chunks/framework.DzywJFVC.js";const E=JSON.parse('{"title":"环境变量","description":"","frontmatter":{},"headers":[],"relativePath":"md/deploy/env.md","filePath":"md/deploy/env.md"}'),e={name:"md/deploy/env.md"},p=n(`<h1 id="环境变量" tabindex="-1">环境变量 <a class="header-anchor" href="#环境变量" aria-label="Permalink to &quot;环境变量&quot;">​</a></h1><p>在 <code>Vite</code> 中，环境变量的使用是通过 <code>.env</code> 文件以及在代码中访问这些变量来实现</p><h2 id="定义环境变量" tabindex="-1">定义环境变量 <a class="header-anchor" href="#定义环境变量" aria-label="Permalink to &quot;定义环境变量&quot;">​</a></h2><p>你可以在你的项目根目录 <code>/env</code> 中放置下列文件来指定环境变量：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.env</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 在所有的环境中被载入</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.env.local</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 在所有的环境中被载入，但会被 git 忽略</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.env.[mode]</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 只在指定的模式中被载入</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.env.[mode].local</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 只在指定的模式中被载入，但会被 git 忽略</span></span></code></pre></div><h2 id="优先级" tabindex="-1">优先级 <a class="header-anchor" href="#优先级" aria-label="Permalink to &quot;优先级&quot;">​</a></h2><p>在加载环境变量时，<code>Vite</code> 会按照以下优先级从高到低加载：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.env.local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.env.[mode].local</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 如 .env.development.local、.env.production.local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.env.[mode]</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 如 .env.development、.env.production</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.env</span></span></code></pre></div><p>示例内容：</p><div class="language-env vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># token 过期状态码</span></span>
<span class="line"><span>VITE_ACCESS_TOKEN_EXP = 401</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 微服务的 BaseUrl（多服务配置）</span></span>
<span class="line"><span>VITE_API_DOMAIN_JSON = &#39;{</span></span>
<span class="line"><span>  &quot;basics&quot;: &quot;http://172.16.164.37:3001/basics&quot;,</span></span>
<span class="line"><span>  &quot;xxxx&quot;: &quot;http://172.16.164.37:3000/xxxx&quot;</span></span>
<span class="line"><span>}&#39;</span></span></code></pre></div><h2 id="使用环境变量" tabindex="-1">使用环境变量 <a class="header-anchor" href="#使用环境变量" aria-label="Permalink to &quot;使用环境变量&quot;">​</a></h2><div class="danger custom-block"><p class="custom-block-title">提示</p><p><code>import.meta.env</code> 读取环境变量默认都是字符串，模版项目已经帮助你自动转换变量类型。可直接使用值</p></div><p>在 <code>Vite</code> 中，环境变量需要以 <code>VITE\\_ </code>开头。你可以通过 <code>import.meta.env</code> 访问这些变量。例如：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VITE_MPWX_APPID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VITE_API_DOMAIN_JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>示例内容：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VITE_API_DOMAIN_JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> basics</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> json.basics;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VITE_API_DOMAIN_JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.basics;</span></span></code></pre></div>`,16),t=[p];function l(h,k,d,o,c,r){return i(),a("div",null,t)}const y=s(e,[["render",l]]);export{E as __pageData,y as default};
